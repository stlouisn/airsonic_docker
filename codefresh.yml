version: '1.0'

steps:

    build_image:
        title: Building Docker Image
        type: build
        dockerfile: Dockerfile
        image_name: '${{docker_image}}'
        tag: latest
        #working_directory: ${{main_clone}}

    notify_slack:
        image: tutum/curl
        commands:
            - curl -X POST --data-urlencode 'payload={"text":"Succesfully built ${{docker_image}} docker image"}' ${{slack_url}}

    push_image:
        title: Pushing to Docker Registry
        type: push
        candidate: '${{build_image}}'
        tag: latest
        credentials:
            username: '${{docker_username}}'
            password: '${{docker_password}}'